(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[59],{11450:function(G,M,r){"use strict";r.r(M);var H=r(43185),U=r(94412),J=r(57663),g=r(71577),O=r(8870),Q=r(54029),v=r(79166),X=r(34792),C=r(48086),I=r(3182),y=r(2824),T=r(94043),c=r.n(T),D=r(67294),A=r(67265),W=r(73939),Z=r(37476),l=r(5966),i=r(15196),m=r(64317),f=r(85304),L=r(30381),K=r.n(L),S=r(19228),e=r(85893),F={4:"\u623F\u4E3B\u7535\u53F0",1:"\u97F3\u4E50\u70B9\u6B4C",0:"\u6587\u5B57\u804A\u5929"},k=function(){var $=(0,D.useState)(!1),j=(0,y.Z)($,2),N=j[0],p=j[1],h=(0,D.useRef)(),R=(0,D.useRef)(),V=function(){var u=(0,I.Z)(c().mark(function _(a,n,t){var o,x,B,E,P,b,d;return c().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=a.pageSize,x=a.current,B=a.keyword,E={data:[],success:!0,total:10},s.prev=2,s.next=5,(0,f.D4)({pageNum:x,pageSize:o,keyword:B});case 5:d=s.sent,E.total=d==null||(P=d.data)===null||P===void 0?void 0:P.total,E.data=d==null||(b=d.data)===null||b===void 0?void 0:b.list,s.next=13;break;case 10:s.prev=10,s.t0=s.catch(2),E.success=!1;case 13:return s.abrupt("return",E);case 14:case"end":return s.stop()}},_,null,[[2,10]])}));return function(a,n,t){return u.apply(this,arguments)}}(),Y=function(){var u=(0,I.Z)(c().mark(function _(a){var n;return c().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,f.R$)(a);case 3:C.default.success("\u66F4\u65B0\u6210\u529F"),p(!1),(n=R.current)===null||n===void 0||n.reload(),o.next=10;break;case 8:o.prev=8,o.t0=o.catch(0);case 10:case"end":return o.stop()}},_,null,[[0,8]])}));return function(a){return u.apply(this,arguments)}}(),z=[{title:"keyword",hideInTable:!0,dataIndex:"keyword",valueType:"text",fieldProps:{placeholder:"RoomID/RoomUser/RoomName"}},{title:"ID",hideInSearch:!0,dataIndex:"room_id"},{title:"Owner ID",hideInSearch:!0,dataIndex:"room_user"},{title:"Online",hideInSearch:!0,dataIndex:"room_online"},{title:"Name",hideInSearch:!0,dataIndex:"room_name"},{title:"Notice",hideInSearch:!0,dataIndex:"room_notice",ellipsis:!0},{title:"Type",hideInSearch:!0,dataIndex:"room_status",render:function(_,a,n,t){return F[a.room_type]}},{title:"Speak",hideInSearch:!0,dataIndex:"room_sendmsg",render:function(_,a,n,t){return(0,e.jsx)(v.Z,{color:a.room_sendmsg==0?"green":"red"})}},{title:"Robot",hideInSearch:!0,dataIndex:"room_robot",render:function(_,a,n,t){return(0,e.jsx)(v.Z,{color:a.room_robot==1?"green":"red"})}},{title:"Create time",hideInSearch:!0,dataIndex:"user_createtime",render:function(_,a,n,t){return K()(a.user_createtime*1e3).format("YYYY/MM/DD")}},{title:"Status",hideInSearch:!0,dataIndex:"room_status",width:60,render:function(_,a,n,t){return(0,e.jsx)(v.Z,{color:a.room_status===0?"green":"red"})}},{title:"\u64CD\u4F5C",key:"option",valueType:"option",width:150,render:function(_,a,n){return[(0,e.jsx)("a",{onClick:function(){var o;p(!0),(o=h.current)===null||o===void 0||o.setFieldsValue((0,O.Z)((0,O.Z)({},a),{},{user_password:null}))},children:"\u7F16\u8F91"},n)]}}];return(0,e.jsxs)(A.ZP,{children:[(0,e.jsx)(W.ZP,{rowKey:"room_id",request:V,actionRef:R,columns:z}),(0,e.jsxs)(Z.Z,{title:"Update Room",width:"500px",formRef:h,visible:N,onVisibleChange:p,onFinish:Y,children:[(0,e.jsx)(l.Z,{rules:[{required:!0}],name:"room_id",hidden:!0}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(l.Z,{label:"RoomName",rules:[{required:!0}],name:"room_name"}),(0,e.jsx)(l.Z,{label:"Notice",rules:[{required:!0}],name:"room_notice"})]}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(m.Z,{label:"RoomType",rules:[{required:!0}],name:"room_type",options:[{label:"\u97F3\u4E50\u70B9\u6B4C",value:1},{label:"\u623F\u4E3B\u7535\u53F0",value:4},{label:"\u6587\u5B57\u804A\u5929",value:0}]}),(0,e.jsx)(m.Z,{label:"IsPublic",rules:[{required:!0}],name:"room_public",options:[{label:"\u52A0\u5BC6",value:1},{label:"\u516C\u5F00",value:0}]})]}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(m.Z,{label:"\u5F00\u542F\u6295\u7968",rules:[{required:!0}],name:"room_votepass",options:[{label:"OnlyOwner",value:1},{label:"All",value:0}]}),(0,e.jsx)(l.Z,{label:"\u6295\u7968\u6BD4\u4F8B",rules:[{required:!0,type:"number",max:100}],name:"room_votepercent"})]}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(m.Z,{label:"\u70B9\u6B4C\u6743\u9650",rules:[{required:!0}],name:"room_addsong",options:[{label:"Enable",value:1},{label:"Disable",value:0}]}),(0,e.jsx)(m.Z,{label:"\u662F\u5426\u7981\u8A00",rules:[{required:!0}],name:"room_sendmsg",options:[{label:"Enable",value:1},{label:"Disable",value:0}]})]}),(0,e.jsx)(m.Z,{label:"Robot",rules:[{required:!0}],name:"room_robot",options:[{label:"Enable",value:1},{label:"Disable",value:0}]}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(l.Z,{label:"\u70B9\u6B4CCD",rules:[{required:!0,type:"number",max:60,min:3}],name:"room_addsongcd"}),(0,e.jsx)(l.Z,{label:"\u9876\u6B4CCD",rules:[{required:!0,type:"number",max:60,min:3}],name:"room_pushsongcd"})]}),(0,e.jsxs)(i.UW,{children:[(0,e.jsx)(l.Z,{label:"\u70B9\u6B4C\u9650\u989D",rules:[{required:!0,type:"number",max:10,min:1}],name:"room_addcount"}),(0,e.jsx)(l.Z,{label:"\u9876\u6B4C\u65E5\u9650\u989D",rules:[{required:!0,type:"number",max:10,min:1}],name:"room_pushdaycount"})]}),(0,e.jsx)(l.Z,{name:"room_background",disabled:!0,addonAfter:(0,e.jsx)(U.Z,{showUploadList:!1,customRequest:function(_){(0,S.vE)(_,"1",function(a){var n,t;(n=h.current)===null||n===void 0||n.setFieldsValue({room_background:a==null||(t=a.data)===null||t===void 0?void 0:t.attach_path})})},children:(0,e.jsx)(g.Z,{type:"dashed",children:"\u9009\u62E9"})})}),(0,e.jsx)(l.Z.Password,{label:"password",placeholder:"\u4E0D\u4FEE\u6539\u7559\u7A7A",name:"room_password"})]})]})};M.default=k}}]);
